{{/* 
Pexels API Configuration
This partial provides the API key and queries to the frontend JavaScript.
*/}}

{{/* Set Pexels queries from Hugo config (safe to expose) */}}
{{ $pexelsQueries := .Site.Params.pexels.queries }}
{{ $pexelsApiKey := .Site.Params.pexels.api_key }}
{{ if not $pexelsQueries }}
  {{ errorf "Pexels queries not configured in config.toml under [params.pexels.queries]" }}
{{ end }}
<div id="pexels-config" data-queries="{{ $pexelsQueries | jsonify }}" data-apikey="{{ $pexelsApiKey }}" style="display: none;"></div>

<script>
  // Load queries and API key from data attributes (configured in config.toml)
  const configElement = document.getElementById('pexels-config');
  if (configElement) {
    try {
      window.PEXELS_QUERIES = JSON.parse(configElement.getAttribute('data-queries'));
    } catch (error) {
      console.error('Error parsing Pexels queries from config.toml:', error);
      window.PEXELS_QUERIES = [];
    }
    window.PEXELS_API_KEY = configElement.getAttribute('data-apikey') || null;
  } else {
    console.error('Pexels config element not found');
    window.PEXELS_QUERIES = [];
    window.PEXELS_API_KEY = null;
  }
</script>
